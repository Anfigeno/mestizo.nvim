local util = require("mestizo.util")
local M = {}

---@param colores Colores
---@param parametros ...
---@return table
M.obtener = function(colores, parametros)
	local grupos = {}

	local dev_icons = {
		"Apl",
		"Avif",
		"Bash",
		"Bib",
		"Bicep",
		"Bicepparam",
		"Bqn",
		"Bzl",
		"Brewfile",
		"Blueprint",
		"Checkhealth",
		"Commit",
		"Copying",
		"Gemfile",
		"Lesser",
		"Vagrantfile",
		"Awk",
		"Bmp",
		"C",
		"Cfg",
		"Clojure",
		"Cmake",
		"Cobol",
		"Coffee",
		"Conf",
		"Cp",
		"Cpp",
		"Cr",
		"Cs",
		"Csh",
		"Cson",
		"Css",
		"Csv",
		"Cuda",
		"D",
		"Dart",
		"Desktop",
		"Default",
		"Diff",
		"Doc",
		"Docx",
		"Dockerfile",
		"Dosbatch",
		"Dosini",
		"Dot",
		"Drools",
		"Dropbox",
		"Dump",
		"Eex",
		"Ejs",
		"Elixir",
		"Elm",
		"Epuppet",
		"Erlang",
		"Eruby",
		"Fennel",
		"Fish",
		"Forth",
		"Fortran",
		"Fsharp",
		"Fsi",
		"Fsscript",
		"Fsx",
		"Gd",
		"Gif",
		"Git",
		"Gitconfig",
		"Gitcommit",
		"Gitignore",
		"Gitattributes",
		"Glb",
		"Go",
		"Godot",
		"Graphql",
		"Groovy",
		"Gql",
		"Gruntfile",
		"Gtkrc",
		"Gulpfile",
		"Haml",
		"Haxe",
		"Haskell",
		"Hbs",
		"Heex",
		"Hex",
		"Html",
		"Ico",
		"Idlang",
		"Ino",
		"Import",
		"Ipynb",
		"Java",
		"Javascript",
		"Javascript.jsx",
		"Javascriptreact",
		"Jpeg",
		"Jpg",
		"Json",
		"Jsonc",
		"Json5",
		"Julia",
		"Kotlin",
		"Leex",
		"Less",
		"Liquid",
		"Lhaskell",
		"License",
		"Unlicense",
		"Log",
		"Lock",
		"Lprolog",
		"Lua",
		"Make",
		"Markdown",
		"Material",
		"Mdx",
		"Mint",
		"Motoko",
		"Mustache",
		"Nim",
		"Nix",
		"Nu",
		"Node",
		"Obj",
		"Ocaml",
		"Openscad",
		"Opus",
		"Otf",
		"Pck",
		"Pdf",
		"Perl",
		"Php",
		"Plaintex",
		"Png",
		"Po",
		"Postscr",
		"Ppt",
		"Prisma",
		"Procfile",
		"Prolog",
		"Ps1",
		"Psd1",
		"Psm1",
		"Psb",
		"Psd",
		"Puppet",
		"Pyc",
		"Pyd",
		"Pyo",
		"Python",
		"Query",
		"R",
		"Res",
		"Resi",
		"Rlib",
		"Rmd",
		"Rproj",
		"Ruby",
		"Rust",
		"Sass",
		"Sbt",
		"Scala",
		"Scheme",
		"Scss",
		"Sh",
		"Slim",
		"Sln",
		"Sml",
		"Solidity",
		"Sql",
		"Sqlite",
		"Sqlite3",
		"Srt",
		"Ssa",
		"Styl",
		"Sublime",
		"Suo",
		"Svelte",
		"Svg",
		"Swift",
		"Systemverilog",
		"Tads",
		"Tcl",
		"Templ",
		"Terminal",
		"Tex",
		"Toml",
		"Tres",
		"Tscn",
		"Twig",
		"Txt",
		"Typescript",
		"Typescriptreact",
		"Vala",
		"Verilog",
		"Vhdl",
		"Vim",
		"Vue",
		"Wasm",
		"Webm",
		"Webp",
		"Webpack",
		"Xcplayground",
		"Xls",
		"Xlsx",
		"Xml",
		"Yaml",
		"Zig",
		"Zsh",
	}

	if type(parametros) == "boolean" then
		parametros = { "rojo", "base" }
	end

	local color_principal = colores[parametros[2] or "base"]
	local color_principal_inactivo = util.mezclar_colores(color_principal, colores.base, 0.5)
	local color_de_fondo = colores[parametros[1] or "rojo"]
	local color_de_fondo_inactivo = util.mezclar_colores(color_de_fondo, colores.base, 0.5)

	for i in ipairs(dev_icons) do
		local elemento = dev_icons[i]
		local prefijo = "BufferLineDevIcon" .. elemento

		grupos[prefijo] = { fg = color_principal_inactivo, bg = color_de_fondo_inactivo }
		grupos[prefijo .. "Inactive"] = { fg = color_principal_inactivo, bg = color_de_fondo_inactivo }
		grupos[prefijo .. "Selected"] = { fg = color_principal, bg = color_de_fondo }
	end

	return grupos
end

return M
